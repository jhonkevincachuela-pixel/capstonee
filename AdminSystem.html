<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost Items Admin</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background-image: url('background.jpg');
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #4a6ee0, #6a5de0);
            color: white;
            padding: 25px 30px;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .header h1 i {
            font-size: 32px;
        }
        
        .stats-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.2);
            padding: 15px 20px;
            border-radius: 8px;
            min-width: 150px;
        }
        
        .stat-card .number {
            font-size: 28px;
            font-weight: bold;
            display: block;
        }
        
        .stat-card .label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* Main Layout */
        .main-content {
            display: flex;
            min-height: 600px;
        }
        
        /* Form Section */
        .form-section {
            flex: 0 0 350px;
            background: #f8f9fa;
            padding: 25px;
            border-right: 1px solid #eaeaea;
        }
        
        .form-title {
            color: #4a6ee0;
            margin-bottom: 20px;
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #4a6ee0;
            outline: none;
        }
        
        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #4a6ee0;
            color: white;
            flex: 1;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            color: #4a6ee0;
            border: 2px solid #4a6ee0;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* Table Section - WIDER LAYOUT */
        .table-section {
            flex: 1;
            padding: 25px;
            width: calc(100% - 350px);
        }
        
        /* Toolbar */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .search-box {
            flex: 1;
            max-width: 400px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }
        
        .filter-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-group select {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
            font-size: 14px;
        }
        
        .toolbar-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        /* Table - WIDER LAYOUT WITH MORE COLUMNS */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #eaeaea;
            max-height: 500px;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1100px;
        }
        
        thead {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        th {
            padding: 16px 12px;
            text-align: left;
            color: #555;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            font-size: 14px;
        }
        
        tbody tr {
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }
        
        tbody tr:hover {
            background: #f8f9fa;
        }
        
        td {
            padding: 14px 12px;
            color: #444;
            vertical-align: top;
            font-size: 13.5px;
        }
        
        /* Wider Column Styles */
        .col-name {
            min-width: 180px;
        }
        
        .col-description {
            min-width: 220px;
            max-width: 220px;
        }
        
        .col-category {
            min-width: 100px;
        }
        
        .col-location {
            min-width: 120px;
        }
        
        .col-dates {
            min-width: 100px;
        }
        
        .col-status {
            min-width: 120px;
        }
        
        .col-contact {
            min-width: 150px;
        }
        
        .col-actions {
            min-width: 140px;
        }
        
        /* Status Badges */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            white-space: nowrap;
        }
        
        .status-lost {
            background: #ffeaa7;
            color: #d63031;
        }
        
        .status-found {
            background: #55efc4;
            color: #00b894;
        }
        
        .status-claimed {
            background: #74b9ff;
            color: #0984e3;
        }
        
        .status-disposed {
            background: #dfe6e9;
            color: #636e72;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }
        
        .edit-btn {
            background: #d0ebff;
            color: #1971c2;
        }
        
        .delete-btn {
            background: #ffe3e3;
            color: #c92a2a;
        }
        
        .view-btn {
            background: #e6f7e9;
            color: #2e7d32;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* Text Styles */
        .item-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }
        
        .item-description {
            color: #666;
            font-size: 12.5px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .item-details {
            font-size: 12.5px;
            color: #666;
            margin-top: 4px;
        }
        
        .contact-info {
            font-size: 12.5px;
            color: #444;
        }
        
        .date-info {
            font-size: 12.5px;
            color: #666;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: #666;
        }
        
        /* Footer */
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 1px solid #eaeaea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-info {
            display: flex;
            gap: 20px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .modal-content h3 {
            color: #e74c3c;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-content p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .table-section {
                width: calc(100% - 350px);
            }
        }
        
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .form-section {
                flex: none;
                border-right: none;
                border-bottom: 1px solid #eaeaea;
            }
            
            .table-section {
                width: 100%;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .filter-group {
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }
            
            .stats-container {
                flex-direction: column;
            }
            
            .stat-card {
                min-width: auto;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .footer {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .footer-info {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Icons */
        .icon {
            font-family: "Segoe UI Symbol", sans-serif;
        }
    </style>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>
                <i class="fas fa-search"></i>
                Lost & Found Management System
            </h1>
            <div class="stats-container">
                <div class="stat-card">
                    <span class="number" id="totalItems">0</span>
                    <span class="label">Total Items</span>
                </div>
                <div class="stat-card">
                    <span class="number" id="lostItems">0</span>
                    <span class="label">Currently Lost</span>
                </div>
                <div class="stat-card">
                    <span class="number" id="foundItems">0</span>
                    <span class="label">Found Items</span>
                </div>
                <div class="stat-card">
                    <span class="number" id="claimedItems">0</span>
                    <span class="label">Claimed Items</span>
                </div>
                <div class="stat-card">
                    <span class="number" id="disposedItems">0</span>
                    <span class="label">Disposed Items</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Form Section -->
            <div class="form-section">
                <h2 class="form-title">
                    <i class="fas fa-plus-circle"></i>
                    <span id="formTitle">Add New Lost Item</span>
                </h2>
                
                <form id="itemForm">
                    <input type="hidden" id="itemId">
                    
                    <div class="form-group">
                        <label for="itemName">
                            <i class="fas fa-tag"></i> Item Name *
                        </label>
                        <input type="text" id="itemName" required placeholder="Enter item name">
                    </div>
                    
                    <div class="form-group">
                        <label for="category">
                            <i class="fas fa-folder"></i> Category *
                        </label>
                        <select id="category" required>
                            <option value="">Select Category</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Documents">Documents</option>
                            <option value="Accessories">Accessories</option>
                            <option value="Jewelry">Jewelry</option>
                            <option value="Books">Books</option>
                            <option value="Bags & Luggage">Bags & Luggage</option>
                            <option value="Keys">Keys</option>
                            <option value="Wallets & Purses">Wallets & Purses</option>
                            <option value="Eyewear">Eyewear</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">
                            <i class="fas fa-map-marker-alt"></i> Location Found *
                        </label>
                        <input type="text" id="location" required placeholder="Where was it found?">
                    </div>
                    
                    <div class="form-group">
                        <label for="dateFound">
                            <i class="fas fa-calendar"></i> Date Found *
                        </label>
                        <input type="date" id="dateFound" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">
                            <i class="fas fa-align-left"></i> Description *
                        </label>
                        <textarea id="description" required placeholder="Describe the item, any identifying marks, etc."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="status">
                            <i class="fas fa-info-circle"></i> Status *
                        </label>
                        <select id="status" required>
                            <option value="lost">Still Lost</option>
                            <option value="found">Found (Unclaimed)</option>
                            <option value="claimed">Claimed by Owner</option>
                            <option value="disposed">Disposed</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="finderName">
                            <i class="fas fa-user"></i> Finder's Name *
                        </label>
                        <input type="text" id="finderName" required placeholder="Name of person who found it">
                    </div>
                    
                    <div class="form-group">
                        <label for="contactInfo">
                            <i class="fas fa-phone"></i> Contact Information *
                        </label>
                        <input type="text" id="contactInfo" required placeholder="Phone or email for contact">
                    </div>
                    
                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            <span id="submitButtonText">Save Item</span>
                        </button>
                        <button type="button" id="cancelBtn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="button" id="clearBtn" class="btn btn-outline">
                            <i class="fas fa-broom"></i> Clear
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Table Section - WIDER LAYOUT -->
            <div class="table-section">
                <!-- Toolbar -->
                <div class="toolbar">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search items by name, description, location, or finder...">
                    </div>
                    <div class="filter-group">
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Documents">Documents</option>
                            <option value="Accessories">Accessories</option>
                            <option value="Jewelry">Jewelry</option>
                            <option value="Books">Books</option>
                            <option value="Bags & Luggage">Bags & Luggage</option>
                            <option value="Keys">Keys</option>
                            <option value="Wallets & Purses">Wallets & Purses</option>
                            <option value="Eyewear">Eyewear</option>
                            <option value="Other">Other</option>
                        </select>
                        <select id="statusFilter">
                            <option value="">All Status</option>
                            <option value="lost">Still Lost</option>
                            <option value="found">Found</option>
                            <option value="claimed">Claimed</option>
                            <option value="disposed">Disposed</option>
                        </select>
                        <select id="dateFilter">
                            <option value="">All Dates</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="older">Older</option>
                        </select>
                        <button id="refreshBtn" class="btn btn-outline">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    <div class="toolbar-actions">
                        <button onclick="exportData()" class="btn btn-success">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <!-- Table - WIDER WITH MORE COLUMNS -->
                <div class="table-container">
                    <table id="itemsTable">
                        <thead>
                            <tr>
                                <th class="col-name">Item Name & Description</th>
                                <th class="col-category">Category</th>
                                <th class="col-location">Location Found</th>
                                <th class="col-dates">Date Found</th>
                                <th class="col-status">Status</th>
                                <th class="col-contact">Finder & Contact</th>
                                <th class="col-actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="itemsTableBody">
                            <!-- Items will be dynamically inserted here -->
                        </tbody>
                    </table>
                    <div class="empty-state" id="emptyState">
                        <i class="fas fa-inbox"></i>
                        <h3>No Lost Items Found</h3>
                        <p>Add your first lost item using the form on the left.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-info">
                <p>
                    <i class="fas fa-database"></i>
                    Total Items: <span id="footerCount">0</span>
                </p>
                <p>
                    <i class="fas fa-clock"></i>
                    Last Updated: <span id="lastUpdated">Just now</span>
                </p>
                <p>
                    <i class="fas fa-user"></i>
                    Items per page: <span id="itemsPerPage">All</span>
                </p>
            </div>
            <p>Lost & Found Management System &copy; 2026</p>
        </footer>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h3>
                <i class="fas fa-exclamation-triangle"></i>
                Confirm Delete
            </h3>
            <p>Are you sure you want to delete this lost item record? This action cannot be undone.</p>
            <div class="modal-actions">
                <button id="confirmDeleteBtn" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Delete
                </button>
                <button id="cancelDeleteBtn" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- View Details Modal -->
    <div class="modal" id="viewModal">
        <div class="modal-content" style="max-width: 600px;">
            <h3>
                <i class="fas fa-eye"></i>
                Item Details
            </h3>
            <div id="itemDetailsContent" style="max-height: 400px; overflow-y: auto;">
                <!-- Details will be loaded here -->
            </div>
            <div class="modal-actions">
                <button id="closeViewBtn" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage - Using localStorage to persist data
        const STORAGE_KEY = 'lostItemsDB';
        
        // DOM Elements
        const itemsTableBody = document.getElementById('itemsTableBody');
        const emptyState = document.getElementById('emptyState');
        const itemForm = document.getElementById('itemForm');
        const formTitle = document.getElementById('formTitle');
        const submitButtonText = document.getElementById('submitButtonText');
        const itemIdInput = document.getElementById('itemId');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const statusFilter = document.getElementById('statusFilter');
        const dateFilter = document.getElementById('dateFilter');
        const refreshBtn = document.getElementById('refreshBtn');
        const clearBtn = document.getElementById('clearBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const deleteModal = document.getElementById('deleteModal');
        const viewModal = document.getElementById('viewModal');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        const closeViewBtn = document.getElementById('closeViewBtn');
        const itemDetailsContent = document.getElementById('itemDetailsContent');
        
        // Statistics Elements
        const totalItemsEl = document.getElementById('totalItems');
        const lostItemsEl = document.getElementById('lostItems');
        const foundItemsEl = document.getElementById('foundItems');
        const claimedItemsEl = document.getElementById('claimedItems');
        const disposedItemsEl = document.getElementById('disposedItems');
        const footerCount = document.getElementById('footerCount');
        const lastUpdatedEl = document.getElementById('lastUpdated');
        const itemsPerPageEl = document.getElementById('itemsPerPage');
        
        // State
        let items = [];
        let editItemId = null;
        let deleteItemId = null;
        let filteredItems = [];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setCurrentDate();
            loadItems();
            setupEventListeners();
            updateLastUpdatedTime();
        });
        
        // Set default date to today
        function setCurrentDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateFound').value = today;
        }
        
        // Load items from localStorage
        function loadItems() {
            const savedItems = localStorage.getItem(STORAGE_KEY);
            items = savedItems ? JSON.parse(savedItems) : [];
            
            // Add sample data if empty
            if (items.length === 0) {
                items = getSampleData();
                saveItems();
            }
            
            applyFilters();
            displayItems();
            updateStatistics();
        }
        
        // Get sample data for initial demo
        function getSampleData() {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            const lastWeek = new Date(today);
            lastWeek.setDate(lastWeek.getDate() - 7);
            
            return [
                {
                    id: '1',
                    itemName: 'iPhone 13 Pro Max',
                    category: 'Electronics',
                    location: 'Main Lobby Reception Desk',
                    dateFound: today.toISOString().split('T')[0],
                    description: 'Black iPhone 13 Pro Max with blue silicone case, 256GB, cracked screen protector, last seen location: Building A, 3rd floor',
                    status: 'found',
                    finderName: 'John Smith',
                    contactInfo: 'john.smith@email.com | 555-0123',
                    createdAt: today.toISOString(),
                    updatedAt: today.toISOString()
                },
                {
                    id: '2',
                    itemName: 'Leather Wallet - Brown',
                    category: 'Wallets & Purses',
                    location: 'Parking Lot A, Near Exit Gate',
                    dateFound: yesterday.toISOString().split('T')[0],
                    description: 'Genuine brown leather wallet, contains: Driver\'s License (Michael Brown), 2 credit cards, $45 cash, gym membership card',
                    status: 'claimed',
                    finderName: 'Sarah Johnson',
                    contactInfo: 'Security Office | Ext. 123',
                    createdAt: yesterday.toISOString(),
                    updatedAt: yesterday.toISOString()
                },
                {
                    id: '3',
                    itemName: 'University Student ID',
                    category: 'Documents',
                    location: 'Library - 2nd Floor Study Area',
                    dateFound: lastWeek.toISOString().split('T')[0],
                    description: 'Student ID Card, Name: Emily Chen, Student ID: UC20234567, Department: Computer Science, Valid until: 2025-06-30',
                    status: 'lost',
                    finderName: 'Library Staff',
                    contactInfo: 'library@university.edu | 555-9876',
                    createdAt: lastWeek.toISOString(),
                    updatedAt: lastWeek.toISOString()
                },
                {
                    id: '4',
                    itemName: 'MacBook Pro 14"',
                    category: 'Electronics',
                    location: 'Conference Room B',
                    dateFound: '2024-01-10',
                    description: 'Space Gray MacBook Pro 14-inch, M2 Pro chip, 16GB RAM, 512GB SSD, Serial: XYZ123456, Sticker on cover: "Code is Poetry"',
                    status: 'found',
                    finderName: 'IT Department',
                    contactInfo: 'it-support@company.com | 555-4567',
                    createdAt: '2024-01-10T10:30:00Z',
                    updatedAt: '2024-01-12T14:20:00Z'
                },
                {
                    id: '5',
                    itemName: 'Ray-Ban Sunglasses',
                    category: 'Eyewear',
                    location: 'Cafeteria - Table near Window',
                    dateFound: '2024-01-08',
                    description: 'Black Ray-Ban Wayfarer sunglasses, gold metal accents, in black hard case, minor scratch on right lens',
                    status: 'disposed',
                    finderName: 'Cafeteria Staff',
                    contactInfo: 'cafe@building.com',
                    createdAt: '2024-01-08T15:45:00Z',
                    updatedAt: '2024-01-20T09:15:00Z'
                },
                {
                    id: '6',
                    itemName: 'Car Keys with Fob',
                    category: 'Keys',
                    location: 'Main Entrance Key Drop Box',
                    dateFound: '2024-01-05',
                    description: 'Toyota car key with black leather keychain, remote key fob, house keys (3), gym locker key attached',
                    status: 'found',
                    finderName: 'Security Guard',
                    contactInfo: 'security@premises.com | 555-7890',
                    createdAt: '2024-01-05T08:00:00Z',
                    updatedAt: '2024-01-05T08:00:00Z'
                },
                {
                    id: '7',
                    itemName: 'Textbook: Advanced Calculus',
                    category: 'Books',
                    location: 'Mathematics Department',
                    dateFound: '2024-01-03',
                    description: 'Hardcover textbook "Advanced Calculus", 5th Edition, Name written inside: Robert Wilson, Notes on pages 45-89',
                    status: 'claimed',
                    finderName: 'Prof. Johnson',
                    contactInfo: 'math.dept@uni.edu',
                    createdAt: '2024-01-03T11:20:00Z',
                    updatedAt: '2024-01-04T16:30:00Z'
                },
                {
                    id: '8',
                    itemName: 'Designer Handbag',
                    category: 'Bags & Luggage',
                    location: 'Women\'s Restroom - Floor 3',
                    dateFound: '2024-01-02',
                    description: 'Black leather handbag, brand: Michael Kors, contains: lipstick, hand sanitizer, hairbrush, empty wallet slot',
                    status: 'lost',
                    finderName: 'Cleaning Staff',
                    contactInfo: 'janitorial@building.com',
                    createdAt: '2024-01-02T19:30:00Z',
                    updatedAt: '2024-01-02T19:30:00Z'
                }
            ];
        }
        
        // Save items to localStorage
        function saveItems() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
            updateLastUpdatedTime();
        }
        
        // Apply search and filters
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categoryFilter.value;
            const status = statusFilter.value;
            const dateFilterValue = dateFilter.value;
            
            filteredItems = items.filter(item => {
                // Search filter
                const matchesSearch = !searchTerm || 
                    item.itemName.toLowerCase().includes(searchTerm) ||
                    item.location.toLowerCase().includes(searchTerm) ||
                    item.finderName.toLowerCase().includes(searchTerm) ||
                    (item.description && item.description.toLowerCase().includes(searchTerm)) ||
                    (item.contactInfo && item.contactInfo.toLowerCase().includes(searchTerm));
                
                // Category filter
                const matchesCategory = !category || item.category === category;
                
                // Status filter
                const matchesStatus = !status || item.status === status;
                
                // Date filter
                let matchesDate = true;
                if (dateFilterValue) {
                    const itemDate = new Date(item.dateFound);
                    const today = new Date();
                    
                    switch(dateFilterValue) {
                        case 'today':
                            matchesDate = itemDate.toDateString() === today.toDateString();
                            break;
                        case 'week':
                            const weekAgo = new Date(today);
                            weekAgo.setDate(weekAgo.getDate() - 7);
                            matchesDate = itemDate >= weekAgo;
                            break;
                        case 'month':
                            const monthAgo = new Date(today);
                            monthAgo.setMonth(monthAgo.getMonth() - 1);
                            matchesDate = itemDate >= monthAgo;
                            break;
                        case 'older':
                            const monthAgoOld = new Date(today);
                            monthAgoOld.setMonth(monthAgoOld.getMonth() - 1);
                            matchesDate = itemDate < monthAgoOld;
                            break;
                    }
                }
                
                return matchesSearch && matchesCategory && matchesStatus && matchesDate;
            });
        }
        
        // Display items in table with wider layout
        function displayItems() {
            if (filteredItems.length === 0) {
                itemsTableBody.innerHTML = '';
                emptyState.style.display = 'block';
                itemsPerPageEl.textContent = '0';
                return;
            }
            
            emptyState.style.display = 'none';
            itemsPerPageEl.textContent = filteredItems.length;
            
            const rows = filteredItems.map(item => `
                <tr>
                    <td class="col-name">
                        <div class="item-name">${escapeHtml(item.itemName)}</div>
                        <div class="item-description">${escapeHtml(item.description || 'No description')}</div>
                    </td>
                    <td class="col-category">
                        <div style="font-weight: 500; color: #4a6ee0;">${escapeHtml(item.category)}</div>
                    </td>
                    <td class="col-location">
                        <div style="font-weight: 500;">${escapeHtml(item.location)}</div>
                    </td>
                    <td class="col-dates">
                        <div class="date-info">
                            <strong>Found:</strong> ${formatDate(item.dateFound)}<br>
                            <small>Added: ${formatDateShort(item.createdAt)}</small>
                        </div>
                    </td>
                    <td class="col-status">
                        <span class="status-badge status-${item.status}">
                            ${getStatusText(item.status)}
                        </span>
                        ${item.status === 'claimed' ? '<div class="item-details"><small>Claimed</small></div>' : ''}
                    </td>
                    <td class="col-contact">
                        <div class="contact-info">
                            <strong>Finder:</strong> ${escapeHtml(item.finderName)}<br>
                            <strong>Contact:</strong> ${escapeHtml(item.contactInfo)}
                        </div>
                    </td>
                    <td class="col-actions">
                        <div class="action-buttons">
                            <button onclick="editItem('${item.id}')" class="action-btn edit-btn" title="Edit Item">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button onclick="showDeleteModal('${item.id}')" class="action-btn delete-btn" title="Delete Item">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <button onclick="viewItemDetails('${item.id}')" class="action-btn view-btn" title="View Details">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            itemsTableBody.innerHTML = rows;
        }
        
        // Update statistics
        function updateStatistics() {
            const total = items.length;
            const lost = items.filter(item => item.status === 'lost').length;
            const found = items.filter(item => item.status === 'found').length;
            const claimed = items.filter(item => item.status === 'claimed').length;
            const disposed = items.filter(item => item.status === 'disposed').length;
            
            totalItemsEl.textContent = total;
            lostItemsEl.textContent = lost;
            foundItemsEl.textContent = found;
            claimedItemsEl.textContent = claimed;
            disposedItemsEl.textContent = disposed;
            footerCount.textContent = total;
        }
        
        // Update last updated time
        function updateLastUpdatedTime() {
            const now = new Date();
            lastUpdatedEl.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) + 
                                      ' | ' + now.toLocaleDateString();
        }
        
        // Form submission
        itemForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const itemData = {
                itemName: document.getElementById('itemName').value,
                category: document.getElementById('category').value,
                location: document.getElementById('location').value,
                dateFound: document.getElementById('dateFound').value,
                description: document.getElementById('description').value,
                status: document.getElementById('status').value,
                finderName: document.getElementById('finderName').value,
                contactInfo: document.getElementById('contactInfo').value,
                updatedAt: new Date().toISOString()
            };
            
            if (editItemId) {
                // Update existing item
                const index = items.findIndex(item => item.id === editItemId);
                if (index !== -1) {
                    items[index] = { ...items[index], ...itemData };
                    showAlert('Item updated successfully!', 'success');
                }
            } else {
                // Create new item
                itemData.id = generateId();
                itemData.createdAt = new Date().toISOString();
                items.unshift(itemData);
                showAlert('Item added successfully!', 'success');
            }
            
            saveItems();
            resetForm();
            applyFilters();
            displayItems();
            updateStatistics();
        });
        
        // Edit item
        window.editItem = function(id) {
            const item = items.find(item => item.id === id);
            if (!item) return;
            
            // Populate form
            document.getElementById('itemName').value = item.itemName;
            document.getElementById('category').value = item.category;
            document.getElementById('location').value = item.location;
            document.getElementById('dateFound').value = item.dateFound;
            document.getElementById('description').value = item.description || '';
            document.getElementById('status').value = item.status;
            document.getElementById('finderName').value = item.finderName || '';
            document.getElementById('contactInfo').value = item.contactInfo || '';
            itemIdInput.value = item.id;
            
            // Update form title
            editItemId = id;
            formTitle.textContent = 'Edit Lost Item';
            submitButtonText.textContent = 'Update Item';
            
            // Scroll to form on mobile
            if (window.innerWidth < 992) {
                document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
            }
        };
        
        // View item details
        window.viewItemDetails = function(id) {
            const item = items.find(item => item.id === id);
            if (!item) return;
            
            const detailsHtml = `
                <div style="padding: 10px;">
                    <h4 style="color: #4a6ee0; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px;">
                        ${escapeHtml(item.itemName)}
                    </h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div>
                            <strong>Category:</strong><br>
                            ${escapeHtml(item.category)}
                        </div>
                        <div>
                            <strong>Status:</strong><br>
                            <span class="status-badge status-${item.status}" style="margin-top: 5px;">
                                ${getStatusText(item.status)}
                            </span>
                        </div>
                        <div>
                            <strong>Location Found:</strong><br>
                            ${escapeHtml(item.location)}
                        </div>
                        <div>
                            <strong>Date Found:</strong><br>
                            ${formatDate(item.dateFound)}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong>Description:</strong>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 5px;">
                            ${escapeHtml(item.description || 'No description provided')}
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div>
                            <strong>Finder's Name:</strong><br>
                            ${escapeHtml(item.finderName)}
                        </div>
                        <div>
                            <strong>Contact Information:</strong><br>
                            ${escapeHtml(item.contactInfo)}
                        </div>
                    </div>
                    
                    <div style="background: #f1f5f9; padding: 10px; border-radius: 5px; font-size: 13px;">
                        <div style="display: flex; justify-content: space-between;">
                            <div>
                                <strong>Record Created:</strong><br>
                                ${formatDateTime(item.createdAt)}
                            </div>
                            <div>
                                <strong>Last Updated:</strong><br>
                                ${formatDateTime(item.updatedAt)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            itemDetailsContent.innerHTML = detailsHtml;
            viewModal.style.display = 'flex';
        };
        
        // Show delete confirmation modal
        window.showDeleteModal = function(id) {
            deleteItemId = id;
            deleteModal.style.display = 'flex';
        };
        
        // Confirm delete
        confirmDeleteBtn.addEventListener('click', function() {
            if (!deleteItemId) return;
            
            const index = items.findIndex(item => item.id === deleteItemId);
            if (index !== -1) {
                items.splice(index, 1);
                saveItems();
                applyFilters();
                displayItems();
                updateStatistics();
                showAlert('Item deleted successfully!', 'success');
            }
            
            deleteModal.style.display = 'none';
            deleteItemId = null;
        });
        
        // Cancel delete
        cancelDeleteBtn.addEventListener('click', function() {
            deleteModal.style.display = 'none';
            deleteItemId = null;
        });
        
        // Close view modal
        closeViewBtn.addEventListener('click', function() {
            viewModal.style.display = 'none';
        });
        
        // Close modals when clicking outside
        [deleteModal, viewModal].forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                    if (modal === deleteModal) deleteItemId = null;
                }
            });
        });
        
        // Reset form
        function resetForm() {
            itemForm.reset();
            itemIdInput.value = '';
            editItemId = null;
            formTitle.textContent = 'Add New Lost Item';
            submitButtonText.textContent = 'Save Item';
            setCurrentDate();
        }
        
        // Clear form button
        clearBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all form fields?')) {
                resetForm();
            }
        });
        
        // Cancel button
        cancelBtn.addEventListener('click', resetForm);
        
        // Setup event listeners
        function setupEventListeners() {
            // Search and filter events
            searchInput.addEventListener('input', debounce(function() {
                applyFilters();
                displayItems();
            }, 300));
            
            categoryFilter.addEventListener('change', function() {
                applyFilters();
                displayItems();
            });
            
            statusFilter.addEventListener('change', function() {
                applyFilters();
                displayItems();
            });
            
            dateFilter.addEventListener('change', function() {
                applyFilters();
                displayItems();
            });
            
            // Refresh button
            refreshBtn.addEventListener('click', function() {
                loadItems();
                showAlert('Data refreshed!', 'info');
            });
        }
        
        // Utility Functions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                weekday: 'short',
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            });
        }
        
        function formatDateShort(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            const now = new Date();
            const diffDays = Math.floor((now - date) / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric'
            });
        }
        
        function formatDateTime(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function getStatusText(status) {
            const statusMap = {
                'lost': 'Still Lost',
                'found': 'Found (Unclaimed)',
                'claimed': 'Claimed by Owner',
                'disposed': 'Disposed'
            };
            return statusMap[status] || status;
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Show alert message
        function showAlert(message, type) {
            // Create alert element
            const alertEl = document.createElement('div');
            alertEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 6px;
                color: white;
                font-weight: 600;
                z-index: 1001;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease-out;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            
            // Set color based on type
            const colors = {
                success: '#2ecc71',
                error: '#e74c3c',
                info: '#3498db',
                warning: '#f39c12'
            };
            
            alertEl.style.background = colors[type] || colors.info;
            alertEl.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                ${message}
            `;
            
            // Add animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(alertEl);
            
            // Remove after 3 seconds
            setTimeout(() => {
                alertEl.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(alertEl);
                }, 300);
            }, 3000);
        }
        
        // Export data functionality
        window.exportData = function() {
            const dataStr = JSON.stringify(items, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `lost-items-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showAlert('Data exported successfully!', 'success');
        };
        
        // Import data functionality
        window.importData = function() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const importedItems = JSON.parse(event.target.result);
                        if (Array.isArray(importedItems)) {
                            if (confirm(`Import ${importedItems.length} items? This will replace current data.`)) {
                                items = importedItems;
                                saveItems();
                                loadItems();
                                showAlert('Data imported successfully!', 'success');
                            }
                        } else {
                            showAlert('Invalid file format', 'error');
                        }
                    } catch (error) {
                        showAlert('Error importing file: ' + error.message, 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        };
    </script>
</body>
</html>